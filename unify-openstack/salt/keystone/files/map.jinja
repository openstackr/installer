{% set keystone = salt['grains.filter_by']({
   'RedHat': {
        'name': 'keystone',
        'password': 'password',
        'conn_token': 'admin',
    },
    'Debian': {
        'name': 'keystone',
        'password': 'password',
        'conn_token': 'admin',
    },

}, merge=salt['pillar.get']('openstack-instance:' + pillar['current-openstack-instance'] + ':openstack-components:keystone')) %} 

{% set controller_ip = [] %}
  {%- for key, value in salt['mine.get']('G@openstack-id:' + grains['openstack-id'] + ' and G@function:controller','network.ip_addrs','compound').items() -%}
    {% do controller_ip.append(value) %}
  {%- endfor -%}

